<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Royal Kod Ãœretici</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f4f9; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); width: 100%; max-width: 400px; text-align: center; }
        h2 { color: #8b4513; border-bottom: 2px solid #d4af37; padding-bottom: 10px; }
        .input-group { margin: 20px 0; text-align: left; }
        label { font-weight: bold; font-size: 14px; color: #555; }
        select, input { width: 100%; padding: 12px; margin-top: 5px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background-color: #d4af37; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; margin-top: 20px; }
        #output { margin-top: 25px; padding: 15px; background: #fffaf0; border: 1px dashed #d4af37; display: none; word-break: break-all; }
        .code-list { text-align: left; font-family: monospace; font-size: 18px; color: #333; }
    </style>
</head>
<body>

<div class="container">
    <h2>Royal Kod Ãœretici</h2>
    <p style="font-size: 12px; color: #666;">Ãœretim partisi iÃ§in benzersiz kodlar oluÅŸturun.</p>

    <div class="input-group">
        <label>Ãœretim GÃ¼nÃ¼ (5. Rakam Sabit)</label>
        <select id="dayDigit">
            <option value="0">Pazar (0)</option>
            <option value="1">Pazartesi (1)</option>
            <option value="2">SalÄ± (2)</option>
            <option value="3">Ã‡arÅŸamba (3)</option>
            <option value="4">PerÅŸembe (4)</option>
            <option value="5">Cuma (5)</option>
            <option value="6">Cumartesi (6)</option>
        </select>
    </div>

    <div class="input-group">
        <label>KaÃ§ Adet Kod Ãœretilsin?</label>
        <input type="number" id="count" value="10" min="1" max="100">
    </div>

    <button onclick="generateAndSend()">KODLARI ÃœRET VE KAYDET</button>

    <div id="output">
        <strong>Ãœretilen Kodlar:</strong>
        <div class="code-list" id="codeList"></div>
    </div>
</div>

<script>
    // Config bilgilerini Ã¶nceki kodundan buraya kopyala
    const SHEET_URL = "SENÄ°N_GOOGLE_SHEETS_URL_ADRESÄ°N"; 
    const BOT_TOKEN = "SENÄ°N_TELEGRAM_BOT_TOKEN";
    const CHAT_ID = "SENÄ°N_CHAT_ID";

    function generateRandomCode(day) {
        // RR + 4 hane rastgele + GÃœN (5. rakam) + 2 hane rastgele
        let part1 = Math.floor(1000 + Math.random() * 9000); // 4 hane
        let part2 = Math.floor(10 + Math.random() * 90);    // 2 hane
        return `RR${part1}${day}${part2}`;
    }

    async function generateAndSend() {
        const day = document.getElementById('dayDigit').value;
        const count = document.getElementById('count').value;
        const codes = [];

        for(let i=0; i<count; i++) {
            codes.push(generateRandomCode(day));
        }

        // Ekranda gÃ¶ster
        document.getElementById('output').style.display = 'block';
        document.getElementById('codeList').innerHTML = codes.join('<br>');

        // Telegram'a gÃ¶nder
        const message = `ðŸ†• *YENÄ° ÃœRETÄ°M KODLARI*\nðŸ“… GÃ¼n Kodu: ${day}\nðŸ”¢ Adet: ${count}\n\n\`${codes.join('\n')}\``;
        
        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ chat_id: CHAT_ID, text: message, parse_mode: 'Markdown' })
        });

        // Sheets'e gÃ¶nder (Opsiyonel: KayÄ±t altÄ±na almak iÃ§in)
        fetch(SHEET_URL, {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify({
                personel: "SÄ°STEM GENEL",
                durum: "YENÄ° KODLAR ÃœRETÄ°LDÄ°",
                kodlar: codes.join(', '),
                zaman: new Date().toLocaleString('tr-TR')
            })
        });

        alert("Kodlar Ã¼retildi, Telegram ve Sheets'e gÃ¶nderildi!");
    }
</script>
</body>
</html>
